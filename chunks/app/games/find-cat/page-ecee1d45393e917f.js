(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[756],{7019:function(e,t,a){Promise.resolve().then(a.bind(a,7279))},7279:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return o}});var s=a(7437),n=a(2265),l=a(9376),r=a(3145),i=a(6225),c=a.n(i);let d=[{id:1,title:"温馨树屋",image:"/images/find-cat/scene1.jpg",cat:{x:250,y:300,radius:30},hint:"看看那个舒适的角落..."}];function o(){let e=(0,l.useRouter)(),[t,a]=(0,n.useState)(d),[i,o]=(0,n.useState)(0),[u,x]=(0,n.useState)(!1),[m,h]=(0,n.useState)(!1),[g,p]=(0,n.useState)([]),[f,b]=(0,n.useState)(!1),v=(0,n.useRef)(null);return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(c(),{children:(0,s.jsx)("meta",{name:"viewport",content:"width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"})}),(0,s.jsx)("div",{className:"min-h-screen bg-gradient-to-b from-green-50 to-white p-4",children:(0,s.jsxs)("div",{className:"max-w-4xl mx-auto",children:[(0,s.jsxs)("div",{className:"flex justify-end mb-4",children:[(0,s.jsx)("input",{ref:v,type:"file",accept:"image/*",onChange:e=>{var s;let n=null===(s=e.target.files)||void 0===s?void 0:s[0];if(n){let e=new FileReader;e.onload=e=>{var s;let n={id:t.length+1,title:"自定义场景",image:null===(s=e.target)||void 0===s?void 0:s.result,cat:{x:0,y:0,radius:30},hint:"点击设置小猫位置"};a([...t,n]),o(t.length),b(!0),h(!1),p([])},e.readAsDataURL(n)}},className:"hidden"}),(0,s.jsxs)("button",{onClick:()=>{var e;return null===(e=v.current)||void 0===e?void 0:e.click()},className:"px-4 py-2 bg-green-500 text-white rounded-lg hover:bg-green-600 transition-colors flex items-center gap-2",children:[(0,s.jsx)("span",{children:"\uD83D\uDCF7"}),(0,s.jsx)("span",{children:"上传新图片"})]})]}),(0,s.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,s.jsx)("button",{onClick:()=>e.back(),className:"text-gray-600 hover:text-gray-800 p-2 -ml-2",children:"← 返回"}),(0,s.jsx)("h1",{className:"text-xl md:text-2xl font-bold text-green-600",children:"寻找躲猫猫的小猫"}),(0,s.jsx)("button",{onClick:()=>x(!u),className:"text-green-600 hover:text-green-700 p-2 -mr-2",children:"提示"})]}),(0,s.jsx)("div",{className:"relative bg-white/80 backdrop-blur-sm rounded-xl shadow-lg overflow-hidden border border-gray-100",children:(0,s.jsxs)("div",{className:"relative aspect-w-16 aspect-h-9 cursor-crosshair",onClick:f?e=>{if(!f)return;let s=e.currentTarget.getBoundingClientRect(),n=e.clientX-s.left,l=e.clientY-s.top,r=[...t];r[i]={...r[i],cat:{x:n,y:l,radius:30},hint:"小猫就在这附近..."},a(r),b(!1)}:e=>{let a=e.currentTarget.getBoundingClientRect(),s=e.clientX-a.left,n=e.clientY-a.top,l=t[i],r=Math.sqrt(Math.pow(l.cat.x-s,2)+Math.pow(l.cat.y-n,2));p([...g,{x:s,y:n}]),r<=l.cat.radius&&h(!0)},children:[(0,s.jsx)(r.default,{src:t[i].image,alt:"寻找小猫场景",layout:"fill",objectFit:"contain",priority:!0}),g.map((e,t)=>(0,s.jsx)("div",{className:"absolute w-3 h-3 md:w-4 md:h-4 bg-red-500 rounded-full opacity-50 transform -translate-x-1/2 -translate-y-1/2",style:{left:e.x,top:e.y}},t)),m&&(0,s.jsx)("div",{className:"absolute w-6 h-6 md:w-8 md:h-8 border-4 border-green-500 rounded-full animate-pulse transform -translate-x-1/2 -translate-y-1/2",style:{left:t[i].cat.x,top:t[i].cat.y}})]})}),(0,s.jsxs)("div",{className:"mt-4 text-center px-4",children:[f&&(0,s.jsx)("p",{className:"text-orange-500 mb-2 animate-pulse",children:"点击图片设置小猫的位置"}),u&&(0,s.jsx)("p",{className:"text-green-600 mb-2 text-sm md:text-base",children:t[i].hint}),m&&(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)("p",{className:"text-lg md:text-xl text-green-600 font-bold",children:"太棒了！你找到了小猫！"}),i<t.length-1&&(0,s.jsx)("button",{onClick:()=>{i<t.length-1?o(e=>e+1):o(0),h(!1),p([]),x(!1)},className:"px-6 py-2 bg-green-500 text-white rounded-lg hover:bg-green-600",children:"下一关"})]})]})]})})]})}}},function(e){e.O(0,[286,971,117,744],function(){return e(e.s=7019)}),_N_E=e.O()}]);