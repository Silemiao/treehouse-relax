(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[806],{9631:function(e,t,n){Promise.resolve().then(n.bind(n,5401))},9376:function(e,t,n){"use strict";var s=n(5475);n.o(s,"useRouter")&&n.d(t,{useRouter:function(){return s.useRouter}})},6225:function(e,t){"use strict";function n(){return null}Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return n}}),("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},5401:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return i}});var s=n(7437),l=n(2265),r=n(9376),a=n(6225),o=n.n(a);function i(){let e=(0,r.useRouter)(),[t,n]=(0,l.useState)([]),[a,i]=(0,l.useState)(0),[c,u]=(0,l.useState)(0),[d,f]=(0,l.useState)(!1),[h,m]=(0,l.useState)(null),[x,g]=(0,l.useState)(null);(0,l.useEffect)(()=>{let e=localStorage.getItem("2048_high_score");e&&u(parseInt(e)),p()},[]),(0,l.useEffect)(()=>{let e=e=>e.preventDefault();return document.addEventListener("touchmove",e,{passive:!1}),()=>document.removeEventListener("touchmove",e)},[]);let p=()=>{let e=[];b(e),b(e),n(e),i(0)},b=e=>{let t=[];for(let n=0;n<4;n++)for(let s=0;s<4;s++)e.some(e=>e.position[0]===n&&e.position[1]===s)||t.push([n,s]);if(t.length>0){let n=t[Math.floor(Math.random()*t.length)];e.push({value:.9>Math.random()?2:4,id:Date.now().toString(),position:n})}},v=e=>{},j=e=>{d&&h===e?(n(t.filter(t=>t.id!==e)),m(null)):d&&m(e)};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(o(),{children:(0,s.jsx)("meta",{name:"viewport",content:"width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"})}),(0,s.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-yellow-50 to-orange-50 p-4",onTouchStart:e=>{let t=e.touches[0];g({x:t.clientX,y:t.clientY})},onTouchEnd:e=>{if(!x)return;let t=e.changedTouches[0],n=t.clientX-x.x,s=t.clientY-x.y;(Math.abs(n)>30||Math.abs(s)>30)&&(Math.abs(n)>Math.abs(s)?v(n>0?"right":"left"):v(s>0?"down":"up")),g(null)},children:(0,s.jsxs)("div",{className:"max-w-md mx-auto",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,s.jsx)("button",{onClick:()=>e.back(),className:"text-gray-600 hover:text-gray-800 p-2 -ml-2",children:"← 返回"}),(0,s.jsxs)("div",{className:"text-right",children:[(0,s.jsxs)("div",{className:"text-sm text-gray-600",children:["最高分: ",c]}),(0,s.jsxs)("div",{className:"text-lg font-bold text-orange-600",children:["得分: ",a]})]})]}),(0,s.jsxs)("div",{className:"flex justify-between mb-4 gap-2",children:[(0,s.jsx)("button",{onClick:p,className:"px-4 py-2 bg-orange-500 text-white rounded-lg hover:bg-orange-600 flex-1",children:"重新开始"}),(0,s.jsx)("button",{onClick:()=>f(!d),className:"px-4 py-2 rounded-lg flex-1 ".concat(d?"bg-red-500 text-white":"bg-gray-200 text-gray-700"),children:d?"退出作弊":"作弊模式"})]}),(0,s.jsx)("div",{className:"bg-orange-100 p-4 rounded-xl",children:(0,s.jsx)("div",{className:"grid grid-cols-4 gap-2",children:Array.from({length:16}).map((e,n)=>{let l=t.find(e=>e.position[0]===Math.floor(n/4)&&e.position[1]===n%4);return(0,s.jsx)("div",{onClick:()=>l&&j(l.id),className:"aspect-square rounded-lg flex items-center justify-center font-bold text-xl\n                      ".concat(l?"bg-orange-300":"bg-orange-200"," \n                      ").concat(d&&l&&h===l.id?"ring-2 ring-red-500":"","\n                      ").concat(d&&l?"cursor-pointer hover:opacity-90":""),children:null==l?void 0:l.value},n)})})}),(0,s.jsxs)("div",{className:"mt-4 text-sm text-gray-600 text-center",children:[(0,s.jsx)("p",{className:"mb-1",children:"滑动屏幕或使用方向键移动方块"}),d&&(0,s.jsx)("p",{className:"text-red-500",children:"点击方块两次删除它"})]})]})})]})}}},function(e){e.O(0,[971,117,744],function(){return e(e.s=9631)}),_N_E=e.O()}]);